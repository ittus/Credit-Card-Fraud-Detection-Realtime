// https://github.com/topojson/topojson-simplify Version 2.0.0. Copyright 2016 Mike Bostock.
!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("topojson-client")):"function"==typeof define&&define.amd?define(["exports","topojson-client"],n):n(r.topojson=r.topojson||{},r.topojson)}(this,function(r,n){"use strict";function t(){return!0}function e(r){return r}function o(r){return null!=r.type}function a(r){var n=r[0],t=r[1],e=r[2];return Math.abs((n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1]))}function c(r){for(var n,t=-1,e=r.length,o=r[e-1],a=0;++t<e;)n=o,o=r[t],a+=n[0]*o[1]-n[1]*o[0];return Math.abs(a)/2}function i(r,n){return r[1][2]-n[1][2]}function f(r,n){if(t=r.length){if((n=+n)<=0||t<2)return r[0];if(n>=1)return r[t-1];var t,e=(t-1)*n,o=Math.floor(e),a=r[o],c=r[o+1];return a+(c-a)*(e-o)}}function u(r,n){return n-r}function l(r,n){if(!r.length)return 0;var t,e,o,a,c,i,f,u=0,l=r[0],s=l[0]*k,h=(l[1]*k+j)/2,g=w(h),p=N(h);for(c=1,i=r.length;c<i;++c)l=r[c],t=s,s=l[0]*k,e=s-t,h=(l[1]*k+j)/2,o=g,g=w(h),a=p,p=N(h),f=a*p,u+=x(f*N(e),o*g+f*w(e));return u=2*(u>d?u-j:u<-d?u+j:u),n&&(u*=-1),u<0?u+_:u}function s(r){var n=r[0][0]*k,t=r[0][1]*k,e=w(t),o=N(t),a=r[1][0]*k,c=r[1][1]*k,i=w(c),f=N(c),u=r[2][0]*k,l=r[2][1]*k,s=w(l),g=N(l),p=h(n,e,o,a,i,f),v=h(a,i,f,u,s,g),y=h(u,s,g,n,e,o),m=(p+v+y)/2;return 4*A(q(L(0,C(m/2)*C((m-p)/2)*C((m-v)/2)*C((m-y)/2))))}function h(r,n,t,e,o,a){var c=P(e-r),i=w(c),f=N(c),u=a*f,l=t*o-n*a*i,s=n*o+t*a*i;return x(q(u*u+l*l),s)}var g=function(r){function n(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(n);break;case"LineString":t(r.arcs);break;case"MultiLineString":r.arcs.forEach(t);break;case"Polygon":r.arcs.forEach(t);break;case"MultiPolygon":r.arcs.forEach(e)}}function t(r){for(var n=0,t=r.length;n<t;++n){var e,o=r[n],u=o<0&&(o=~o,!0);null==(e=f[o])&&(f[o]=e=++i,c[e]=a[o]),r[n]=u?~e:e}}function e(r){r.forEach(t)}var o,a=r.arcs,c=r.arcs=[],i=-1,f=new Array(a.length);for(o in r.objects)n(r.objects[o]);return r},p=function(r,n){function a(r){switch(r.type){case"Polygon":r.arcs=c(r.arcs),r.arcs||(r.type=null,delete r.arcs);break;case"MultiPolygon":r.arcs=r.arcs.map(c).filter(e),r.arcs.length||(r.type=null,delete r.arcs);break;case"GeometryCollection":r.geometries.forEach(a),r.geometries=r.geometries.filter(o),r.geometries.length||(r.type=null,delete r.geometries)}}function c(r){return r.length&&i(r[0])?[r.shift()].concat(r.filter(f)):null}function i(r){return n(r,!1)}function f(r){return n(r,!0)}var u;null==n&&(n=t);for(u in r.objects)a(r.objects[u]);return g(r)},v=function(r){function n(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(n);break;case"Polygon":t(r.arcs);break;case"MultiPolygon":r.arcs.forEach(t)}}function t(r){for(var n=0,t=r.length;n<t;++n,++a)for(var e=r[n],c=0,i=e.length;c<i;++c){var f=e[c];f<0&&(f=~f);var u=o[f];u>=0&&u!==a?o[f]=-1:o[f]=a}}var e,o={},a=0;for(e in r.objects)n(r.objects[e]);return function(r){for(var n,t=0,e=r.length;t<e;++t)if(n=r[t],o[n<0?~n:n]<0)return!0;return!1}},y=function(r,t,e){return t=null==t?Number.MIN_VALUE:+t,null==e&&(e=c),function(o,a){return e(n.feature(r,{type:"Polygon",arcs:[o]}).geometry.coordinates[0],a)>=t}},m=function(){function r(r,n){for(;n>0;){var t=(n+1>>1)-1,o=e[t];if(i(r,o)>=0)break;e[o._=n]=o,e[r._=n=t]=r}}function n(r,n){for(;;){var t=n+1<<1,a=t-1,c=n,f=e[c];if(a<o&&i(e[a],f)<0&&(f=e[c=a]),t<o&&i(e[t],f)<0&&(f=e[c=t]),c===n)break;e[f._=n]=f,e[r._=n=c]=r}}var t={},e=[],o=0;return t.push=function(n){return r(e[n._=o]=n,o++),o},t.pop=function(){if(!(o<=0)){var r,t=e[0];return--o>0&&(r=e[o],n(e[r._=0]=r,0)),t}},t.remove=function(t){var a,c=t._;if(e[c]===t)return c!==--o&&(a=e[o],(i(a,t)<0?r:n)(e[a._=c]=a,c)),c},t},b=function(r,t){function e(r){i.remove(r),r[1][2]=t(r),i.push(r)}var o=n.transform(r),c=n.untransform(r),i=m();return null==t&&(t=a),r.arcs.forEach(function(r){var n,a,f,u=[],l=0;for(r.forEach(o),a=1,f=r.length-1;a<f;++a)n=r.slice(a-1,a+2),n[1][2]=t(n),u.push(n),i.push(n);for(r[0][2]=r[f][2]=1/0,a=0,f=u.length;a<f;++a)n=u[a],n.previous=u[a-1],n.next=u[a+1];for(;n=i.pop();){var s=n.previous,h=n.next;n[1][2]<l?n[1][2]=l:l=n[1][2],s&&(s.next=h,s[2]=n[2],e(s)),h&&(h.previous=s,h[0]=n[0],e(h))}r.forEach(c)}),r},M=function(r,n){var t=[];return r.arcs.forEach(function(r){r.forEach(function(r){isFinite(r[2])&&t.push(r[2])})}),t.length&&f(t.sort(u),n)},E=function(r,n){return n=null==n?Number.MIN_VALUE:+n,r.arcs.forEach(r.transform?function(r){for(var t,e,o=0,a=0,c=-1,i=-1,f=r.length;++c<f;)t=r[c],t[2]>=n?(e=r[++i],e[0]=t[0]+o,e[1]=t[1]+a,o=a=0):(o+=t[0],a+=t[1]);r.length=++i}:function(r){for(var t,e=-1,o=-1,a=r.length;++e<a;)t=r[e],t[2]>=n&&(r[++o]=t);r.length=++o}),r.arcs.forEach(r.transform?function(r){var n=0,t=0,e=r.length,o=r[0];for(o.length=2;++n<e;)o=r[n],o.length=2,(o[0]||o[1])&&(r[++t]=o);r.length=(t||1)+1}:function(r){var n,t,e=0,o=0,a=r.length,c=r[0],i=c[0],f=c[1];for(c.length=2;++e<a;)c=r[e],n=c[0],t=c[1],c.length=2,i===n&&f===t||(r[++o]=c,i=n,f=t);r.length=(o||1)+1}),r},d=Math.PI,j=2*d,_=4*d,k=d/180,P=Math.abs,A=Math.atan,x=Math.atan2,w=Math.cos,L=Math.max,N=Math.sin,q=Math.sqrt,C=Math.tan;r.filter=p,r.filterAttached=v,r.filterWeight=y,r.planarRingArea=c,r.planarTriangleArea=a,r.presimplify=b,r.quantile=M,r.simplify=E,r.sphericalRingArea=l,r.sphericalTriangleArea=s,Object.defineProperty(r,"__esModule",{value:!0})});